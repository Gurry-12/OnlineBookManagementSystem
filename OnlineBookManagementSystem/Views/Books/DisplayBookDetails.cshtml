@model OnlineBookManagementSystem.Models.Book

@{
    ViewData["Title"] = "Book Details";
    int stockValue = 0;
    int.TryParse(Model.Stock, out stockValue);
}
<link href="~/css/bookdisplay.css" rel="stylesheet" />

<div class="container my-5">
    <div class="book-container">
        <div class="row g-5 align-items-start">
            <!-- Book Cover -->
            <div class="col-lg-4 col-md-5 col-sm-6 col-10 text-center">
                <img src="@Url.Content(Model.ImgUrl)" alt="Book Cover" class="book-cover shadow-sm img-fluid rounded" />
            </div>

            <!-- Book Info -->
            <div class="col-lg-5 col-md-7 col-sm-6 col-12">
                <h2 class="book-title mb-3">@Model.Title</h2>
                <p class="book-author text-muted mb-3">by <strong>@Model.Author</strong></p>

                <p><i class="bi bi-upc-scan me-2"></i><strong>ISBN:</strong> @Model.Isbn</p>
                <p><i class="bi bi-currency-rupee me-2"></i><strong>Price:</strong> <span class="price-tag text-success">₹@Model.Price?.ToString("0.00")</span></p>
                <p>
                    <i class="bi bi-box-seam me-2"></i>
                    <strong>Stock:</strong>
                    <span class="badge bg-@(stockValue > 0 ? "success" : "danger")">@Model.Stock</span>
                </p>

                <!-- User Options -->
                <div id="UserTimeBookOption" class="d-flex flex-wrap gap-3 mt-4 d-none">
                    <!-- Favorite Icon -->
                    <i class="bi @(Model.IsFavorite == true ? "bi-heart-fill" : "bi-heart") icon-button fs-4"
                       id="fav-icon-recommend-@Model.Id"
                       onclick="AddToFavorites(@Model.Id)"
                       title="Add to Favorites"
                       style="cursor: pointer; @(Model.IsFavorite == true ? "color: red;" : "")">
                    </i>

                    <!-- Cart Icon -->
                    <i class="bi bi-cart icon-button fs-4"
                       onclick="AddtoCart(@Model.Id)"
                       title="Add to Cart"
                       id="cart-icon-@Model.Id"
                       style="cursor: pointer;">
                    </i>

                    <!-- Cart Quantity Controls -->
                    <div id="cart-counter-@Model.Id" class="d-none d-flex align-items-center gap-2">
                        <button class="btn btn-outline-secondary btn-sm" onclick="changeCartQuantity(@Model.Id, 'decrease', 'profile')">-</button>
                        <span id="cart-quantity-@Model.Id">1</span>
                        <button class="btn btn-outline-secondary btn-sm" onclick="changeCartQuantity(@Model.Id, 'increase', 'profile')">+</button>
                    </div>
                </div>
            </div>

            <!-- Author Card -->
            <div class="col-lg-3 col-md-12">
                <div class="card p-3 shadow-sm author-card">
                    <h5 class="fw-semibold">About the Author</h5>
                    <p>@Model.Author is an author of several books in this collection.</p>

                    <h6 class="mt-4">Other Works</h6>
                    <div class="d-flex gap-2 flex-wrap">
                        <img src="~/images/morgan-housel-az_mmsmacjg-unsplash.jpg" class="img-thumbnail" style="width: 60px;" />
                        <img src="~/images/surja-sen-das-raj-ant0gocex1w-unsplash.jpg" class="img-thumbnail" style="width: 60px;" />
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabs Section -->
        <div class="mt-5">
            <ul class="nav nav-tabs" id="bookDetailsTabs">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" href="#overview">Overview</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#details">Details</a>
                </li>
            </ul>

            <div class="tab-content p-4 border border-top-0 bg-light rounded-bottom">
                <div class="tab-pane fade show active" id="overview">
                    <p class="mb-2"><strong>ISBN:</strong> @Model.Isbn</p>
                    <p class="mb-2"><strong>Price:</strong> ₹@Model.Price</p>
                    <p class="mb-0"><strong>Stock:</strong> @Model.Stock</p>
                </div>
                <div class="tab-pane fade" id="details">
                    <p>This engaging book takes readers through an immersive journey. Stay tuned for more updates and chapter summaries.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Toastr JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script src="~/js/books/bookshome.js"></script>
